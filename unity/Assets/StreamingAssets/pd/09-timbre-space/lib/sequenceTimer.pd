#N canvas 372 254 1068 624 10;
#X obj 164 584 s sequence-\$1-tick;
#X obj 78 78 r master-timecode;
#X obj 78 159 %;
#X obj 78 180 select 0;
#X obj 127 102 r sequence-\$1-time;
#X obj 164 379 spigot;
#X obj 202 351 r sequence-\$1-switch;
#X obj 300 63 r tempo-lock;
#X obj 78 241 spigot;
#X obj 300 84 swap 1;
#X obj 300 105 -;
#X obj 300 126 metro;
#X obj 350 126 r sequence-\$1-time;
#X obj 704 216 table sequence-\$1-durations;
#X obj 576 56 f \$1;
#X obj 254 401 r seq-\$1-last-idx;
#X obj 164 461 f;
#X obj 195 456 + 1;
#X obj 254 428 tabread sequence-\$1-durations;
#X obj 164 527 select 0;
#X obj 254 473 + 0.5;
#X obj 254 494 i;
#X msg 576 77 \; sequence-\$1-durations const 1 \;;
#X obj 576 34 r sequence-\$1-duration-reset;
#X obj 816 34 r sequence-\$1-duration-table-vis;
#X obj 816 56 f \$1;
#X msg 816 77 \; pd-sequence-\$1-durations vis 1 \;;
#X obj 641 289 t f f;
#X obj 641 319 pack f \$1 f;
#X obj 681 289 - 1;
#X obj 555 56 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 254 452 clip 1 100;
#X obj 164 400 t b b;
#X msg 41 430 0;
#X obj 254 519 - 1;
#X obj 164 548 t b b;
#X obj 337 324 tabletool sequence-\$1-durations;
#X msg 413 291 rand_fill 1 10;
#X obj 237 377 s sequence-\$1-time-unit;
#X msg 337 284 round 1;
#X obj 384 237 r sequence-\$1-duration-random;
#X obj 384 258 t b b;
#X obj 337 200 r sequence-\$1-duration-round;
#X obj 58 180 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 144 548 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 316 563 This may be able to get stuck if the counter never
resets when the duration table changes. could reset the counter when
rhythm changes;
#X obj 41 404 r seq-\$1-rec-done;
#N canvas 660 83 780 665 record-rhythm 0;
#X obj 278 123 select 32;
#X obj 301 186 timer;
#X obj 307 533 list store;
#X msg 274 474 append \$1;
#X obj 301 207 t f b;
#X obj 349 251 f;
#X obj 383 252 + 1;
#X obj 307 408 spigot;
#X msg 387 219 0;
#X obj 278 62 key;
#X obj 278 83 spigot;
#X obj 349 321 select 0;
#X obj 415 154 t f f;
#X obj 442 187 select 1;
#X obj 307 584 list prepend 0;
#X obj 278 144 t b b b;
#X obj 72 395 f;
#X obj 477 340 <=;
#X obj 72 452 select;
#X msg 349 372 0;
#X obj 349 272 t f f;
#X obj 72 473 t b b;
#X text 525 243 sequence-\$1-record-progress-set;
#X obj 415 42 r seq-\$1-rec-done;
#X obj 513 316 r sequence-\$1-length;
#X obj 337 429 r sequence-\$1-time;
#X obj 105 415 r sequence-\$1-length;
#X obj 137 510 s seq-\$1-rec-done;
#X obj 72 549 s sequence-\$1-duration-round;
#X obj 327 498 r seq-\$1-rec-done;
#X obj 307 605 s sequence-\$1-durations;
#X obj 307 429 /;
#X msg 415 63 0;
#X obj 415 84 s sequence-\$1-record-durations-set;
#X obj 415 124 r sequence-\$1-record-durations;
#X obj 546 452 s sequence-\$1-record-progress-set;
#X obj 590 371 r sequence-\$1-length;
#X obj 546 396 swap 12;
#X obj 546 417 -;
#X obj 404 454 oneBang;
#X connect 0 0 15 0;
#X connect 1 0 4 0;
#X connect 2 0 14 0;
#X connect 3 0 2 0;
#X connect 4 0 7 0;
#X connect 4 1 5 0;
#X connect 5 0 6 0;
#X connect 5 0 20 0;
#X connect 6 0 5 1;
#X connect 7 0 31 0;
#X connect 8 0 5 1;
#X connect 9 0 10 0;
#X connect 10 0 0 0;
#X connect 11 0 19 0;
#X connect 11 0 39 0;
#X connect 12 0 10 1;
#X connect 12 1 13 0;
#X connect 13 0 8 0;
#X connect 13 0 39 1;
#X connect 14 0 30 0;
#X connect 15 0 16 0;
#X connect 15 1 1 0;
#X connect 15 2 1 1;
#X connect 16 0 18 0;
#X connect 17 0 7 1;
#X connect 18 0 21 0;
#X connect 19 0 7 1;
#X connect 20 0 11 0;
#X connect 20 1 17 0;
#X connect 20 1 16 1;
#X connect 20 1 37 0;
#X connect 21 0 28 0;
#X connect 21 1 27 0;
#X connect 23 0 32 0;
#X connect 24 0 17 1;
#X connect 25 0 31 1;
#X connect 26 0 18 1;
#X connect 29 0 2 0;
#X connect 31 0 3 0;
#X connect 32 0 33 0;
#X connect 34 0 12 0;
#X connect 36 0 37 1;
#X connect 37 0 38 0;
#X connect 37 1 38 1;
#X connect 38 0 35 0;
#X connect 39 0 2 1;
#X restore 785 465 pd record-rhythm;
#X msg 641 346 \; sequence-\$2-durations resize \$1 \; sequence-\$2-durations
bounds 0 10 \$3 1 \; sequence-\$2-durations yticks 1 1 1 \;;
#X obj 641 238 r sequence-\$1-length;
#X obj 641 259 max 2;
#X text 334 452 << note that even though the durations table initializes
with zeros \, this clip ensures that the default duration of each element
is one. This can be changed manually by banging duration-reset \, or
by entering a rhythm.;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 8 0;
#X connect 3 0 43 0;
#X connect 4 0 2 1;
#X connect 5 0 32 0;
#X connect 6 0 5 1;
#X connect 7 0 8 1;
#X connect 7 0 9 0;
#X connect 8 0 5 0;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 11 0;
#X connect 11 0 5 0;
#X connect 12 0 11 1;
#X connect 14 0 22 0;
#X connect 15 0 18 0;
#X connect 16 0 17 0;
#X connect 16 0 19 0;
#X connect 17 0 16 1;
#X connect 18 0 31 0;
#X connect 19 0 35 0;
#X connect 20 0 21 0;
#X connect 21 0 34 0;
#X connect 23 0 14 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 27 0 28 0;
#X connect 27 1 29 0;
#X connect 28 0 48 0;
#X connect 29 0 28 2;
#X connect 30 0 14 0;
#X connect 31 0 20 0;
#X connect 32 0 16 0;
#X connect 32 1 38 0;
#X connect 33 0 16 1;
#X connect 34 0 19 1;
#X connect 35 0 0 0;
#X connect 35 0 44 0;
#X connect 35 1 33 0;
#X connect 37 0 36 0;
#X connect 39 0 36 0;
#X connect 40 0 41 0;
#X connect 41 0 39 0;
#X connect 41 1 37 0;
#X connect 42 0 39 0;
#X connect 46 0 33 0;
#X connect 49 0 50 0;
#X connect 50 0 27 0;
